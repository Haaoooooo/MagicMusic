<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./swiper/swiper-bundle.css">
    <link rel="stylesheet" href="./css/yinyue.css">
</head>
<body>
<!-- 头部 -->
<header>
    <img src="./index/img/0003.png" alt="">
    <span>我的</span>
    <span class="dc">音乐馆</span>
    <span>发现</span>
    <img src="./index/img/3@2x.png" alt="">
</header> 
<!-- 轮播图 -->
<div class="swiper-container demo">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
       <img src="./index/img/home-1.png" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./index/img/home-2.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./index/img/home-3.jpg" alt="">
    </div>
   </div>
  <!-- 如果需要分页器 -->
  <div class="swiper-pagination"></div>
</div>
<!-- 正文 -->
<article>
<ul>
        <li>
            <div class="imga pk"><img src="./index/img/4@2x.png" alt=""></div>
            <p>歌手</p>
        </li>
        <li>
            <div class="imga pk"><img src="./index/img/5@2x.png" alt=""></div>
            <p>专辑</p>
        </li>
        <li>
            <div class="imga"><img src="./index/img/6@2x.png" alt=""></div>
            <p>排行</p>
        </li>
        <li>
            <div class="imga"><img src="./index/img/7@2x.png" alt=""></div>
            <p>电台</p>
        </li>
        <li>
            <div class="imga"><img src="./index/img/8@2x.png" alt=""></div>
            <p>歌单</p>
        </li>
</ul>
    <div class="particulars">
     <div class="new">
         <span>精选歌单</span>
         <span class="une">推荐</span>
         <span>最新</span>
     </div>
      <ul class="list">
      </ul>
    </div>
</article>
<!-- 播放器 -->
<footer class="play">
  <div class="box">
      <audio class="audio">
     <source src="./index/img/要不要买菜 - 星月神话.mp3"/>  
      要不要买菜- 星月神话  
      </audio>
      <audio>
       <source src="./index/img/赵方婧 - 尽头.mp3"/>  
       赵方婧 - 尽头
      </audio>
 
    <div class="jp-gui">
        <div class="jp-interface">
            <div class="jp-controls-holder">
                <a href="javascript:;" class="jp-play" tabindex="1" style="display: block;" ></a>
                <a href="javascript:;" class="jp-pause" tabindex="1" style="display: none;"></a>
            </div>
            <!-- <div class="jp-current-time" style="padding: 0 2px 0 5px;">00:00</div>
            <span class="time-sep">/</span>
            <div class="jp-duration" style="padding: 0 5px 0 2px;">01:11</div> -->
        </div>
     <div class="imgx"><img src="./index/img/50@2x.png" alt=""></div>
     <div class="imgs"><img src="./index/img/home-6.png" alt=""></div>
    </div> 
    <div class="text">
       <p>Where IS Your Love</p>
       <p class="hua">横滑可以切换上下首哦</p>
    </div>
    <div class="sol" hidden>
       <ul>
         <li>星月神话<span>X</span></li>
         <li>尽头<span>X</span></li>
       </ul>
    </div>
</div>
<style>

</style>
</footer>
</body>
<script src="./js/doT.min.js"></script>
<script src="./js/jquery-3.5.1.min.js"></script>
<script src="./js/public.js"></script>
<script src="./swiper/swiper-bundle.min.js"></script>
<script src="./js/zepto.js"></script>
<script src="./js/yinyue.js"></script>
<!-- 渲染 -->
<script id="list_template" type="text/x-dot-template">
  {{~ it:value:index}}
  <li>
    <div class="imgz"><img src="{{=value.imgurl}}" alt=""></div>
    <div class="text">
      {{=value.info}}
    </div>
    <p> {{=value.title}}</p>
</li>  
{{~ }}   
</script>
<script>
function newest(){
$.ajax({
   url:"http://192.168.1.94:3000/home?type=new",
   type:'get',
   success:function(ren){
    var dot_tem = doT.template(document.getElementById('list_template').innerText);
    $('.list').html(dot_tem(ren.musicList))
   }
 })  
}

function recommend(){
$.ajax({
   url:"http://192.168.1.94:3000/home?type=recommend",
   type:'get',
   success:function(ren){
    // console.log(ren)
    var dot_tem = doT.template(document.getElementById('list_template').innerText);
    $('.list').html(dot_tem(ren.musicList))
   }
})  
}
recommend() ;
//头部 --我的
$('header span').on('tap',function(){
  $('header span').removeClass('dc');
  $(this).addClass('dc')
});
// 最新推荐
$('.new span').on('tap',function(){
  $('.new span').removeClass('une');
  $(this).addClass('une');
})
$('.new span').eq(1).on('tap',function(){
  recommend() 
})

$('.new span').eq(2).on('tap',function(){
  newest();
})
// 播放动画
var num=0;
var timer=null;
var image=$('.imgx')[0];
var deg=0;
$('.jp-controls-holder').on('touchstart',function(){
num++;

if(num%2==1){
$('.text p').eq('0').addClass('rl')
go();
}else{
 clearInterval(timer) 
 $('.text p').eq('0').removeClass('rl')
}
})
function go(){
timer=setInterval(function(){
image.style.transform="rotate("+deg+"deg)";
deg+=5;
if(deg>360){
  deg=0;
}
},30);  
}
// 轮播图
  new Swiper('.demo', {
    autoplay: {
      delay: 1000
    },
    pagination: {
      el: '.swiper-pagination',
      type: 'bullets',
    },
    loop:true
  })
</script>
</html>